function onYouTubePlayerAPIReady(){ubc_press.YT_ready(!0)}!function(){function e(e,t){var o=document.createElement("div");o.className="notyf__toast";var n=document.createElement("div");n.className="notyf__wrapper";var a=document.createElement("div");a.className="notyf__icon";var s=document.createElement("i");s.className=t;var r=document.createElement("div");r.className="notyf__message",r.innerHTML=e,a.appendChild(s),n.appendChild(a),n.appendChild(r),o.appendChild(n);var i=this;return setTimeout(function(){o.className+=" notyf--disappear",o.addEventListener(i.animationEnd,function(e){e.target==o&&i.container.removeChild(o)});var e=i.notifications.indexOf(o);i.notifications.splice(e,1)},i.options.delay),o}this.Notyf=function(){this.notifications=[];var e={delay:2e3,alertIcon:"notyf__icon--alert",confirmIcon:"notyf__icon--confirm"};arguments[0]&&"object"==typeof arguments[0]?this.options=function(e,t){for(property in t)t.hasOwnProperty(property)&&(e[property]=t[property]);return e}(e,arguments[0]):this.options=e;var t=document.createDocumentFragment(),o=document.createElement("div");o.className="notyf",t.appendChild(o),document.body.appendChild(t),this.container=o,this.animationEnd=function(){var e,t=document.createElement("fake"),o={transition:"animationend",OTransition:"oAnimationEnd",MozTransition:"animationend",WebkitTransition:"webkitAnimationEnd"};for(e in o)if(void 0!==t.style[e])return o[e]}()},this.Notyf.prototype.alert=function(t){var o=e.call(this,t,this.options.alertIcon);o.className+=" notyf--alert",this.container.appendChild(o),this.notifications.push(o)},this.Notyf.prototype.confirm=function(t){var o=e.call(this,t,this.options.confirmIcon);o.className+=" notyf--confirm",this.container.appendChild(o),this.notifications.push(o)}}(),"function"==typeof define&&define.amd?define("Notyf",function(){return Notyf}):"undefined"!=typeof module&&module.exports?module.exports=Notyf:window.Notyf=Notyf,function(e){var t=function(){return new t.init},o=ubc_press_ajax,n=new Notyf({delay:4e3});t.prototype={vimeoPlayer:jQuery(".vimeo-embed"),vimeoPlayerOrigin:"*",youTubePlayers:{},loadYouTubeJS:function(){var e=document.createElement("script");e.src=("https:"==location.protocol?"https":"http")+"://www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},addSubmitHandlerForUserNotesSave:function(){var e=document.querySelector("#ubc_user_notes_metabox");null!==e&&e.addEventListener("submit",this.submit_ubc_user_notes_metabox__save_user_notes)},addClickEventHandlerForMarkAsComplete:function(){for(var e=this.getMarkAsCompleteButtons(),t=0;t<e.length;++t)e[t].addEventListener("click",this.click_mark_as_complete__process_completion)},addClickEventHandlerForSaveForLater:function(){for(var e=this.getSaveForLaterButtons(),t=0;t<e.length;++t)e[t].addEventListener("click",this.click_save_for_later__process_completion)},addEventHandlerForubcPressAllComponentsInSubSectionCompleted:function(){window.addEventListener("ubcPressAllComponentsInSubSectionCompleted",this.all_components_in_subsection_completed__trigger_feedback)},addEventHandlerForubcPressAllComponentsInSectionCompleted:function(){window.addEventListener("ubcPressAllComponentsInSectionCompleted",this.all_components_in_section_completed__trigger_feedback)},addAJAXSuccessHandlerForQuizCompletion:function(){jQuery(document).ajaxSuccess(function(e,t,o){ubc$.prototype.ajax_success__update_sidebar_completion_counts_for_quiz_completion(e,t,o)})},addAJAXSubmissionHandlerForAssignmentCompletion:function(){var e=document.querySelectorAll(".ubc-press-assignment-form"),t=0;for(t=0;t<e.length;t++){e[t].addEventListener("submit",ubc$.prototype.submit__mark_assignment_form_as_complete)}},addEventListenerForVimeoIFrameMessages:function(){window.addEventListener("message",this.onMessageReceived)},getMarkAsCompleteButtons:function(){if(void 0!==this.markAsCompleteButtons)return this.markAsCompleteButtons;var e=document.querySelectorAll(".mark-as-complete");return this.markAsCompleteButtons=e,e},getSaveForLaterButtons:function(){if(void 0!==this.saveForLaterButtons)return this.saveForLaterButtons;var e=document.querySelectorAll(".save-for-later");return this.saveForLaterButtons=e,e},ubcCoursesNotfyResponse:function(e,t){"confirm"===e?n.confirm(t):n.alert(t)},click_mark_as_complete__process_completion:function(e){e.stopPropagation(),e.preventDefault();var t=jQuery(this),o=t.data("post_id");if(void 0===t.attr("disabled")&&!t.hasClass("disabled")){ubc$.prototype.change_all_mark_as_complete_buttons("disable");var n=ubc$.prototype.build_data_for_ajax_complete_item(o);ubc$.prototype.ajax_complete_item(n.data,t,n.originalHref)}},click_save_for_later__process_completion:function(e){e.stopPropagation(),e.preventDefault();var t=jQuery(this),o=t.data("post_id");if(void 0===t.attr("disabled")&&!t.hasClass("disabled")){ubc$.prototype.change_all_save_for_later_buttons("disable");var n=ubc$.prototype.build_data_for_ajax_save_item(o);ubc$.prototype.ajax_save_item(n.data,t,n.originalHref)}},all_components_in_subsection_completed__trigger_feedback:function(e){console.log("All components in this sub-section are complete. Checking other sub-sections in this section.")},all_components_in_section_completed__trigger_feedback:function(e){ubc$.prototype.ajax_get_feedback_form(e)},ajax_get_feedback_form:function(e){var t=ubc$.prototype.getFeedbackFormAjaxURL(),o={url:t};jQuery.ajax({type:"post",dataType:"json",url:t,data:o,beforeSend:function(e,t){console.log("Before get form")},success:function(e){if(console.log(e),e.success){var t=e.data.data.form;jQuery("#gravity-form-feedback").html(t),window.gformInitDatepicker&&gformInitDatepicker(),jQuery(".feedback-sec-button").removeClass("hide"),jQuery("#feedback-canvas").foundation("open",!1,!1)}else console.log("No feedback for you good person. Or there was no gravity form created so... no action.")},complete:function(e,t){console.log("completed get form")},error:function(e,t,o){console.error([e,t,o])}})},getFeedbackFormAjaxURL:function(){return jQuery("#feedback-canvas").data("feedbackurl")},build_data_for_ajax_complete_item:function(e){var t=jQuery('.mark-as-complete[data-post_id="'+e+'"]'),o=t.attr("href");return{thisButton:t,originalHref:o,data:{post_id:t.data("post_id"),nonce:t.data("nonce")}}},build_data_for_ajax_save_item:function(e){var t=jQuery('.save-for-later[data-post_id="'+e+'"]'),o=t.attr("href");return{thisButton:t,originalHref:o,data:{post_id:t.data("post_id"),nonce:t.data("nonce")}}},ajax_complete_item:function(e,t,o){jQuery.ajax({type:"post",dataType:"json",url:o,data:e,beforeSend:function(e,o){ubc$.prototype.start_loading(t)},success:function(e){e.success&&(ubc$.prototype.switch_completed_state(t,e.data.completed),ubc$.prototype.update_progress_bar(e.data.completed),ubc$.prototype.update_count_in_section_list(e.data.completed))},complete:function(e,n){ubc$.prototype.stop_loading(t,o)},error:function(e,t,o){}})},ajax_save_item:function(e,t,o){jQuery.ajax({type:"post",dataType:"json",url:o,data:e,beforeSend:function(e,o){ubc$.prototype.start_loading(t)},success:function(e){e.success&&ubc$.prototype.switch_completed_state(t,e.data.completed)},complete:function(e,n){ubc$.prototype.stop_loading(t,o)},error:function(e,t,o){}})},switch_completed_state:function(e,t){e.toggleClass("success hollow"),e.toggleClass("secondary")},start_loading:function(e){e.is('input[type="submit"]')&&e.val(o.text.loading)},stop_loading:function(e,t){if(e.is('input[type="submit"]'))e.val(o.text.save);else{if(e.hasClass("save-for-later"))this.change_all_save_for_later_buttons("enable"),e.hasClass("hollow")?ubc$.prototype.ubcCoursesNotfyResponse(type="alert",message="Bookmark <strong>removed</strong>."):ubc$.prototype.ubcCoursesNotfyResponse(type="confirm",message="<strong>Bookmarked</strong>.");else{this.change_all_mark_as_complete_buttons("enable");var n=e.attr("data-toggle"),a=jQuery("#"+n);e.hasClass("secondary")?(e.attr("title",o.text.mark_as_complete).html('<span class="show-for-sr">'+o.text.mark_as_complete+'</span><svg class="ui-icon menu-icon"><use xlink:href="#checkmark-circle"></use></svg>'),a.html(o.text.mark_as_complete),ubc$.prototype.ubcCoursesNotfyResponse(type="alert",message="Marked as <strong>incompleted</strong>.")):(e.attr("title",o.text.completed_just_now).html('<span class="show-for-sr">'+o.text.completed_just_now+'</span><svg class="ui-icon menu-icon"><use xlink:href="#checkmark-circle"></use></svg>'),a.html(o.text.completed_just_now),ubc$.prototype.ubcCoursesNotfyResponse(type="confirm",message="Marked as <strong>Completed</strong>."))}e.attr("href",t),e.blur()}},change_all_mark_as_complete_buttons:function(e){var t=jQuery("a.mark-as-complete");switch(e){case"disable":jQuery.each(t,function(e,t){jQuery(t).attr("disabled","disabled"),jQuery(t).addClass("disabled")});break;case"enable":jQuery.each(t,function(e,t){jQuery(t).removeAttr("disabled"),jQuery(t).removeClass("disabled")})}},change_all_save_for_later_buttons:function(e){var t=jQuery("a.save-for-later");switch(e){case"disable":jQuery.each(t,function(e,t){jQuery(t).attr("disabled","disabled"),jQuery(t).addClass("disabled")});break;case"enable":jQuery.each(t,function(e,t){jQuery(t).removeAttr("disabled"),jQuery(t).removeClass("disabled")})}},update_count_in_section_list:function(e){var t,o=this.get_previous_value();t=this.get_new_value(o,e);var n=this.get_total_num_of_components();if(!(o>n)){if(jQuery(".current-page-item .completed-components-details .completed-components").text(t),t===n){var a=document.createEvent("Event");a.initEvent("ubcPressAllComponentsInSubSectionCompleted",!0,!0),window.dispatchEvent(a),this.checkIfAllSubSectionsInThisSectionAreComplete()}}},checkIfAllSubSectionsInThisSectionAreComplete:function(){for(var e=document.getElementById("courses-tab").getElementsByClassName("current-page-item")[0].parentElement.getElementsByClassName("progress-meter-text"),t=!0,o=0;o<e.length;++o){if("100%"!==e[o].innerHTML){t=!1;break}}if(!0===t){var n=document.createEvent("Event");n.initEvent("ubcPressAllComponentsInSectionCompleted",!0,!0),window.dispatchEvent(n)}},get_new_value:function(e,t){return newValue=t?e+1:e-1,newValue},get_previous_value:function(){var e=jQuery(".current-page-item .completed-components-details .completed-components");return parseInt(e.text())},get_total_num_of_components:function(){var e=jQuery(".current-page-item .completed-components-details .total-components");return parseInt(e.text())},update_progress_bar:function(e){var t=this.get_previous_value(),o=this.get_new_value(t,e),n=this.get_total_num_of_components(),a=this.get_percentage(o,n),s=Math.round(a),r=jQuery(".current-page-item .progress"),i=jQuery(r).find(".progress-meter"),c=jQuery(r).find(".progress-meter-text span");i.animate({width:s+"%"},150),c.text(s+"%").append(' <svg class="ui-icon" aria-hidden="true"><use xlink:href="#checkmark-circle"></use></svg>'),0===s?r.addClass("no-complete"):s>0&&r.removeClass("no-complete"),100===s?r.addClass("completed").removeClass("start-progress"):s<100&&r.removeClass("completed")},get_percentage:function(e,t){if(0===e||0===t)return 0;if(e>t)return 100;var o=e/t*100;return o=+o.toFixed(2)},submit__mark_assignment_form_as_complete:function(e){mark_as_complete_button=t.prototype.findMarkAsCompleteForAssignment(e.target);var o=jQuery(mark_as_complete_button).data("post_id");if(jQuery(mark_as_complete_button).hasClass("secondary")){var n=t.prototype.build_data_for_ajax_complete_item(o);t.prototype.ajax_complete_item(n.data,n.thisButton,n.originalHref)}},findMarkAsCompleteForAssignment:function(e){return jQuery(e).parents(".so-panel").find("a.mark-as-complete")},ajax_success__update_sidebar_completion_counts_for_quiz_completion:function(e,t,o){if(null!==o&&!1!==o&&"undefined"!==o){for(var n=o.data.split("&"),a={},s=0;s<n.length;s++){var r=n[s].split("="),i=r[0],c=r[1];a[i]=c}void 0!==a.func&&"completedQuiz"===a.func&&(this.update_progress_bar(!0),this.update_count_in_section_list(!0))}},submit_ubc_user_notes_metabox__save_user_notes:function(e){e.stopPropagation(),e.preventDefault();var o=jQuery(this),n=o.find('input[type="submit"]').eq(0),a=jQuery("#ubc_user_notes_content_ifr").contents().find("body").html();if(void 0===n.attr("disabled")&&!n.hasClass("disabled")){var s=o.find('input[name="object_id"]').eq(0).val(),r=o.find("#nonce_CMB2phpubc_user_notes_metabox").eq(0).val(),i=o.find("#user_notes_ajax_url").eq(0).val();jQuery.ajax({type:"post",dataType:"json",url:i,data:{post_id:s,nonce:r,notes_content:a},beforeSend:function(e,o){t.prototype.start_loading(n)},success:function(e){e.success&&t.prototype.show_saved_message(n,3e3)},complete:function(e,o){t.prototype.stop_loading(n),ubc$.prototype.ubcCoursesNotfyResponse(type="confirm",message="<strong>Note</strong> saved.")},error:function(e,t,o){}})}},show_saved_message:function(e,t){if(!jQuery("#notes_saved_msg").length){var n='<span id="notes_saved_msg" style="display: none;"> '+o.text.saved+" </span>";e.after(n)}jQuery("#notes_saved_msg").fadeIn("fast").delay(t).fadeOut("fast")},onMessageReceived:function(e){if(!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;if("*"===t.prototype.vimeoPlayerOrigin&&(t.prototype.vimeoPlayerOrigin=e.origin),"object"==typeof e&&void 0!==e.data&&"string"==typeof e.data){var o=JSON.parse(e.data);switch(o.event){case"ready":t.prototype.onReady();break;case"finish":t.prototype.onFinish(o)}}},post:function(e,o){var n={method:e};o&&(n.value=o);var a,s=JSON.stringify(n);for(a=0;a<t.prototype.vimeoPlayer.length;++a)t.prototype.vimeoPlayer[a].contentWindow.postMessage(s,t.prototype.vimeoPlayerOrigin)},onReady:function(){this.post("addEventListener","finish")},onFinish:function(e){var t=e.player_id,o=jQuery("#vimeo-embed-post-id-"+t);if(mark_as_complete_button=this.findMarkAsCompleteForIFrame(o),jQuery(mark_as_complete_button).hasClass("secondary")){var n=this.build_data_for_ajax_complete_item(t);this.ajax_complete_item(n.data,n.thisButton,n.originalHref)}},findMarkAsCompleteForIFrame:function(e){return jQuery(e).parents(".so-panel").find("a.mark-as-complete")},get_youtube_frame_id:function(e){var t=document.getElementById(e);if(t){if(-1===t.src.indexOf("youtube")&&-1===t.src.indexOf("youtu.be"))return null;if(/^iframe$/i.test(t.tagName))return e;var o=t.getElementsByTagName("iframe");if(!o.length)return null;for(var n=0;n<o.length&&!/^https?:\/\/(?:www\.)?youtube(?:-nocookie)?\.com(\/|$)/i.test(o[n].src);n++);if((t=o[n]).id)return t.id;do{e+="-frame"}while(document.getElementById(e));return t.id=e,e}return null},YT_ready:function(){var e=[],t=!1;return function(o,n){if(!0===o)for(t=!0;e.length;)e.shift()();else"function"==typeof o&&(t?o():e[n?"unshift":"push"](o))}}(),addEventListerForYouTubeIFrameMessages:function(){this.YT_ready(function(){jQuery(".flex-video > iframe[id]").each(function(){var e=this.id,o=t.prototype.get_youtube_frame_id(e);o&&(t.prototype.youTubePlayers[o]=new YT.Player(o,{events:{onStateChange:t.prototype.youTubeOnStateChange}}))})})},youTubeOnStateChange:function(e){if(0===e.data){var o=e.target.f;mark_as_complete_button=t.prototype.findMarkAsCompleteForIFrame(o);var n=jQuery(mark_as_complete_button).data("post_id");if(jQuery(mark_as_complete_button).hasClass("secondary")){var a=t.prototype.build_data_for_ajax_complete_item(n);t.prototype.ajax_complete_item(a.data,a.thisButton,a.originalHref)}}},hasAttr:function(e){return void 0!==this.attr(e)}},t.init=function(){this.loadYouTubeJS(),this.addClickEventHandlerForMarkAsComplete(),this.addSubmitHandlerForUserNotesSave(),this.addAJAXSuccessHandlerForQuizCompletion(),this.addEventListenerForVimeoIFrameMessages(),this.addEventListerForYouTubeIFrameMessages(),this.addAJAXSubmissionHandlerForAssignmentCompletion(),this.addClickEventHandlerForSaveForLater(),this.addEventHandlerForubcPressAllComponentsInSubSectionCompleted(),this.addEventHandlerForubcPressAllComponentsInSectionCompleted()},t.init.prototype=t.prototype,e.ubc_press=e.ubc$=t}(window);var ubc_press=ubc_press();